

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Data Structures &#8212; py_entitymatching 0.2.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Steps of Supported EM Workflows" href="steps_supp_em_workflows.html" />
    <link rel="prev" title="Guides" href="guides.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="steps_supp_em_workflows.html" title="Steps of Supported EM Workflows"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="guides.html" title="Guides"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">py_entitymatching 0.2.0 documentation</a> &#187;</li> 
      </ul>
    </div>
<div class="content-wrapper">
    <div class="content">
        <div class="document">
            <div class="sphinxsidebar">
                <h3>Table Of Contents</h3>
                <p class="caption"><span class="caption-text">How To Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../how_to_guide.html">How to Guide To Do Entity Matching</a></li>
</ul>
<p class="caption"><span class="caption-text">User Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whatisnew.html">What is New?</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview of Supported EM Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="guides.html">Guides</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Structures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#storing-tables-using-pandas-dataframes">Storing Tables Using Pandas Dataframes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#storing-metadata-using-a-catalog">Storing Metadata Using a Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="steps_supp_em_workflows.html">Steps of Supported EM Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Miscellaneous</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/overview.html">Overview of Command Organization</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/actual_commands.html">Commands in py_entitymatching</a></li>
</ul>

                <h3 style="margin-top: 1.5em;">Search</h3>

                <form class="search" action="../search.html" method="get">
                    <input type="text" name="q" size="18"/>
                    <input type="submit" value="Go"/>
                    <input type="hidden" name="check_keywords" value="yes"/>
                    <input type="hidden" name="area" value="default"/>
                </form>
                <p class="searchtip" style="font-size: 90%">
                    Enter search terms or a module, class or function name.
                </p>

            </div>
             
            <div class="documentwrapper">
                <div class="bodywrapper">
                    <div class="body">
                        
  <div class="section" id="data-structures">
<h1>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h1>
<p>In py_entitymatching, we will need to store many tables and metadata associated
with it. It is important for you to know the data structures that are used to store
the tables and the metadata, so that you can manipulate them based on your need.</p>
<p>As a convention, we will use:</p>
<ul class="simple">
<li>A and B to refer to the original two tables to be matched,</li>
<li>C to refer to the candidate set table obtained from A and B after the blocking step,</li>
<li>S to refer to a sample taken from C, and</li>
<li>G to refer to a table that contains the tuple pairs in S and a golden label for each
pair (indicating the pair as matches or non-matches).</li>
</ul>
<div class="section" id="storing-tables-using-pandas-dataframes">
<h2>Storing Tables Using Pandas Dataframes<a class="headerlink" href="#storing-tables-using-pandas-dataframes" title="Permalink to this headline">¶</a></h2>
<p>We will need to store a lot of data as tables in py_entitymatching. We use pandas Dataframes to
represent tables (you can read more about pandas and pandas Dataframes <a class="reference external" href="http://pandas.pydata.org/">here</a>).</p>
<p><strong>Tuple:</strong> We often refer to a row of a table as tuple. Each tuple is just a row
in a Dataframe and this is of type pandas Series (you can read more about pandas Series
<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.html">here</a>).</p>
</div>
<div class="section" id="storing-metadata-using-a-catalog">
<h2>Storing Metadata Using a Catalog<a class="headerlink" href="#storing-metadata-using-a-catalog" title="Permalink to this headline">¶</a></h2>
<p><strong>Bare Minimum that You Should Know:</strong>
In py_entitymatching, we need to store a lot of metadata with a table such as
key and foreign key. We use a
new data structure, Catalog, to store metadata. You need not worry
about instantiating this object (it gets automatically instantiated when py_entitymatching
gets loaded in Python memory) or manipulating this object directly.</p>
<p>All the py_entitymatching commands correctly handle the metadata in the Catalog,
and for you, there are commands to manipulate the Catalog (please see
<a class="reference internal" href="api/handling_metadata.html#label-handling-metadata"><span class="std std-ref">Handling Metadata</span></a> section for the supported commands).</p>
<p><strong>If You Want to Read More:</strong>
As we mentioned earlier,  we need to store a lot of metadata with a table. Here are a few examples:</p>
<ul class="simple">
<li>Each table in py_entitymatching should have a key, so that we can easily identify the tuples.
Keys are also critical later for debugging, provenance, etc. Key is a metadata that we
want to store for a table.</li>
<li>The blocking step will create tuple pairs from two tables A and B. For example,
suppose we have table A(aid, a, b) and table B(bid, x, y), then the tuple pairs can be
stored in a candidate set table C(cid, aid, bid, a, b, x, y). This table could be very
big, taking up a lot of space in memory. To save space, we may want to just store C as
C(cid, aid, bid) and then have pointers back to tables A and B. The two pointers back
to A and B are metadata that we may want to store for table C. Specifically, the
metadata for C include key (<cite>cid</cite>) and foreign keys (<cite>aid</cite>, <cite>bid</cite>) to the base tables
(<cite>A</cite>, <cite>B</cite>).</li>
</ul>
<p>There are many other examples of metadata that we may want to store for a table. Though
pandas Dataframes is a good choice for storing data as tables, it does not provide a
robust way to store metadata (for more discussion on this topic, please look at <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/2485">this thread</a>).
To tackle this, we have a new data structure, <cite>Catalog</cite> to store the metadata for tables.</p>
<p>Conceptually, Catalog is a dictionary, where the keys are unique identifiers for
each Dataframe and the values are dictionaries containing metadata.
This dictionary can have different kinds of keys that point to metadata.
Examples of such keys are:</p>
<ul class="simple">
<li>key: the name of the key attribute of the table.</li>
<li>ltable: pointer to the left table (see below).</li>
<li>rtable: pointer to the right table (see below).</li>
</ul>
<p>The kind of metadata stored for a table would depend on the table itself. For example,
the input tables must have a key and this can be the only metadata.</p>
<p>But, if we consider table C (which is obtained by performing blocking on input tables A
and B), this table can be very large, so we typically represent it using a view over
two tables A and B. Such a table C will have the following attributes:</p>
<ul class="simple">
<li>_id (key attribute of table C).</li>
<li>ltable_aid (aid is the key attribute in table A).</li>
<li>rtable_bid (bid is the key attribute in table B).</li>
<li>some attributes from A and B.</li>
</ul>
<p>The metadata dictionary for table C will have at least these fields:</p>
<ul class="simple">
<li>key: _id.</li>
<li>ltable: points to table A.</li>
<li>rtable: points to table B.</li>
<li>fk_ltable: ltable_aid (that is, ltable.aid is a foreign key of table A).</li>
<li>fk_rtable: rtable_bid.</li>
</ul>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Tables in py_entitymatching are represented as pandas Dataframes.</li>
<li>The metadata for tables are stored in a separate data structure called Catalog.</li>
<li>The kind of metadata stored will depend on the table (for example input table will have key,
and the table from blocking will have key, ltable, rtable, fk_table, fk_rtable).</li>
<li>So there are five reserved keywords for metadata: key, ltable, rtable, fk_ltable,
fk_rtable. You should not use these names to store metadata for other application
specific purposes.</li>
</ul>
</div>
</div>


                    </div>
                </div>
            </div>

            
            <div class="clearer"></div>
        </div>
    </div>
</div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="steps_supp_em_workflows.html" title="Steps of Supported EM Workflows"
             >next</a> |</li>
        <li class="right" >
          <a href="guides.html" title="Guides"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">py_entitymatching 0.2.0 documentation</a> &#187;</li> 
      </ul>
    </div>
<style type="text/css">
    .scrollToTop {
        text-align: center;
        font-weight: bold;
        position: fixed;
        bottom: 60px;
        right: 40px;
        display: none;
    }
</style>
<a href="#" class="scrollToTop">Scroll To Top</a>
<script type="text/javascript">
$(document).ready(function() {
    //Check to see if the window is top if not then display button
    $(window).scroll(function() {
        if ($(this).scrollTop() > 200) {
            $('.scrollToTop').fadeIn();
        } else {
            $('.scrollToTop').fadeOut();
        }
    });

    //Click event to scroll to top
    $('.scrollToTop').click(function() {
        $('html, body').animate({
            scrollTop: 0
        }, 500);
        return false;
    });
});
</script>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27880019-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </body>
</html>